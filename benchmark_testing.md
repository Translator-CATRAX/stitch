# `normalize_kg2pre.py` (a.k.a. `kg2pre_to_kg2c_edges.py`) Benchmark Testing
Trial Name | Commit | Start Time | End Time | Run Time | Peak Memory Usage | Size (bytes) | Notes
--|--|--|--|--|--|--|--
Base Trial | [3a7bf70](https://github.com/Translator-CATRAX/stitch/commit/3a7bf70f0dafbc7c955196e6cb30b2f8bfce604d) | `Sun Aug  3 05:07:07 UTC 2025` | `Sun Aug  3 10:25:24 UTC 2025` | 5 hours, 18 minutes, 17 seconds | 31% (on `r5a.4xlarge`) | 14958920 | The memory tracker was started about 1 hour and 9 minutes into the build.
JSONLines Streaming System | [7f70612](https://github.com/Translator-CATRAX/stitch/commit/7f7061204234bab174d19f68a129d32a479a7996) | `Mon Aug  4 23:45:24 UTC 2025` | `Tue Aug  5 02:59:38 UTC 2025` | 3 hours, 14 minutes, 14 seconds | 2% (on `r5a.4xlarge`) | 14959840 | This wasn't run on a fresh instance. (Base Trial had already been run; this test was also started but abandoned about 40 minutes into the build after I realized I forgot to measure memory usage. I am unclear whether this would have impacted the indices.) The script used was `normalize_kg2pre_jsonlines.py`. Additionally, I can't run a direct comparison on content because the Base Trial had unsorted keys while this trial had sorted keys in the JSONLines file. I am unclear why this file is 80 bytes smaller. It does not seem to be a systemic error or I would expect the difference to be significantly larger.
`issue-40` Optimizations | [b03785f](https://github.com/Translator-CATRAX/stitch/commit/b03785faf19f0fd0a86568a32826e69b8c222557) | `Tue Aug  5 03:44:06 UTC 2025` | `Tue Aug  5 07:11:41 UTC 2025` | 3 hours, 27 minutes, 35 seconds | 2% (on `r5a.4xlarge`) | 14831612 | I am very surprised by this result. Steve estimated that these optimizations produce a script that took under 30 minutes. However, this was run on the same hardware and the same Babel SQLite file as the previous two tests. The processing after the initial progress bar took, in particular, far longer than I expected (I would estimate roughly 1 hour). While these optimizations do improve on the base trial, they ultimately do not improve on the results of the JSONLines streaming system (which was developed independently of these optimizations - the two are not immediately compatible).
